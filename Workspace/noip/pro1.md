# NOIP 提高组模拟赛

## Day1 Tachibana Kanade's Round 

By: $\mathfrak{Virgil\ von\ Einzbern}$

### 题目概况

|            | paint | angel | harmonics |
| ---------- | ----- | ----- | --------- |
| 测试点数目 | 10    | 20    | 25        |
| 时间限制   | 1s    | 2s    | 3s        |
| 内存限制   | 128MB | 256MB | 512MB     |

### 注意事项

- C++ 中函数 main() 的返回值类型必须是 int, 程序正常结束时的返回值必须是 0.
- 结果比较方式：全文比较（过滤行末空格及文末回车）
- 编译参数：`-lm` （评测时开栈）
### 故事背景

**立华奏**，通称**天使**，是动画《[Angel Beats!](https://zh.moegirl.org/Angel_Beats!)》及其衍生作品的登场角色，女主角。

在死后世界的学校中担任学生会长，生前进行过心脏移植，故一直怀着能对那位捐助者（即为男主角**音无结弦**）道谢的心愿。在故事发展初期曾因为一些误会与**死后世界战线（SSS）**为敌，后期化解误会后与其共同抗争，最终帮助大家完成了生前心愿。喜欢吃麻婆豆腐，是个程序媛。

![立华奏](1.jpg)

##1. Pixel Paint (paint.cpp)

### 题目背景

“我不是天使。”——这是奏的话。然而她还是因被 SSS 的人认为是敌人而没有朋友，因此她每天回到宿舍之后都十分孤单。

一天，无聊的她决定顺应像素复古的风尚画一幅像素画。

### 题目描述

天使在一个 $n\times m$ 的格子纸上作画，她准备画 $q$ 笔，每一笔可能将某一个长方形区域或某一条斜线染色。

由于天使使用的是 HB 铅笔，所以染色层数可以很多。

### 输入格式

第 $1$ 行三个正整数 $n,m,q$ .

接下来 $q$ 行，每行 $t,x_1,y_1,x_2,y_2$ ，数据保证 $x_1\leq x_2$。用 $(x,y)$ 表示第 $x$ 行第 $y$ 列的格子。当 $t=0$ 时表示画从 $(x_1,y_1)$ 到 $(x_2,y_2)$ 的一条斜线，此时保证 $x_1+y_1=x_2+y_2$ 或 $x_1-y_1=x_2-y_2$ ；当 $t=1$ 是表示画从 $(x_1,y_1)$ 到 $(x_2,y_2)$ 的长方形区域。

### 输出格式

输出 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 个整数表示 $(i,j)$ 格子的染色次数。

### 样例数据

| paint1.in                                                    | paint1.ans                                                   |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| <font face="consolas">4 5 4</br>0 2 2 4 4</br>0 1 4 4 1</br>1 1 1 3 3</br>0 1 5 4 2</font> | <font face="consolas">1 1 1 1 1</br>1 2 2 1 0</br>1 2 3 0 0</br>1 1 0 1 0</font> |
### 数据范围

对于 $60\%$ 的数据 $n,m\leq100,q\leq1000$

对于 $100\%$ 的数据 $n,m\leq1000,q\leq10^4$

由于输入输出规模较大，请避免使用低效的输入输出方式。





##2. Angel Player (angel.cpp) 

###题目背景

天使之所以具有强大到多人使用步枪都无法歼灭的战斗力，是因为这位天才计算机少女善于利用技能开发软件 **Angel Player** 来对自身技能进行编程。由于天使处于唯心的死后世界中，也就是说，世界中的事物与存在会随人的意志而转移。因此，天使只需吟唱技能名称，事先在 Angel Player 中设定的程序便会触发。 

然而现在天使面临一个问题：每次使用技能前都要吟唱，不仅容易暴露目标还显得十分中二。因此她决定改造 Angel Player 这一软件使得其支持通过手势控制，为了更精确地控制技能版本（例如 Handsonic 有 ver. 1, 2, 3, 4），她还希望程序能够识别不同的力度。

实际上，作为一位生前曾 AK IOI, WF 等大赛的程序媛，实现这个程序对她来说就像在四川吃麻婆豆腐一样简单。现在，天使请求您帮助她调试这一程序。

### 题目描述

一个手势由数个动作组成，动作在本题中描述为方向+力度，其中，方向用一个大写字母描述（本题中仅有 'L', 'R', 'U', 'D', 'F', 'B' ，分别表示左右上下前后），力度用一个正整数描述。

我们称一系列动作与某种手势相匹配，当且仅当两者的方向顺序相同，且力度的**相对**大小一样（即每个动作在整个动作串中的排名相同）。由于匹配的条件与相对大小有关，所以奏在为某一技能编写程序的时候描述的力度大小是一个排列。

每当一个一系列动作与手势相匹配，这一手势所对应的技能便会触发，本题要求按找时间顺序依次输出触发技能的时刻（技能触发的时间点即为手势最后一个动作完成的时间，例如 $t$ 秒内执行完最后一个动作，那么输出 $t$）。

现在，天使为了进行试验，她需要调试每一个技能是否能正常放出。她每次会调试一个技能，并将 Angel Player 设置为只识别这一技能。接着，她会做出一系列动作（力度互不相同），她希望你帮忙验证程序是否正常运转；也就是说：你需要告诉她在做完一系列动作后，技能的使用情况。

### 输入格式

在描述一个动作串时，每个动作用一个二元组表示，每个二元组由一个大写字母和一个整数组成，分别表示动作的方向和力度。

第 $1$ 行一个正整数 $n$ ，表示触发某一特定技能的手势长度。

接下来 $n$ 行，每行一个二元组表示触发这一技能的手势。

接下来一行一个正整数 $m$ ，表示天使在试验中做出的动作串长度。

接下来 $m$ 行，每行一个二元组描述这一动作串。

###输出格式

每行输出一个整数，代表技能开始发动的时间（要求按时间升序）。



### 样例数据

说明：为方便排版，样例数据的输入格式与测试数据有所不同。

| angel1.in                                                    | angel1.ans                           |
| :----------------------------------------------------------- | ------------------------------------ |
| <font face="consolas">4</br>L 1 R 2 U 3 L 4</br>10</br>F 1 L 2 R 3 U 4 L 5 R 6 U 7 L 8 B 9 D 10</font> | <font face="consolas">2</br>5</font> |

| angel2.in                                                    | angel2.ans                           |
| :----------------------------------------------------------- | ------------------------------------ |
| <font face="consolas">3</br>L 2 R 1 U 3</br>10</br>F 9 L 12 R 10 U 14 L 4 R 1 U 5 L 2 B 9 D 2</font> | <font face="consolas">2</br>5</font> |

附加样例文件：`paint3.in/ans`

###数据范围

| 测试点   | $n,m$             | 特殊性质        |
| ----- | ----------------- | ----------- |
| 1     | $\leq10$          |             |
| 2-4   | $\leq1000$        | 在每个动作串中力度单调 |
| 5-8   | $\leq1000$        |             |
| 9-14  | $\leq1\times10^5$ | 在每个动作串中力度单调 |
| 15-17 | $\leq1\times10^5$ |             |
| 18-20 | $\leq10^6$        |             |

动作的力度 $1\leq w_i\leq10^9$

数据不保证随机性。







## 3. Harmonics (harmonics.cpp)

### 题目背景

死后世界战线的成员众多，除了经常在学生会活动的成员之外，还有很多成员在矿洞中从事挖矿工作。在唯心的死后世界，挖出来的矿经过人类意志的改变就可以变成武器。

在天使决定加入死后世界战线之后，天使却被死后世界的幕后黑手控制，使用 Harmonics 技能产生了许多具有自由意志的分身。为了营救天使，必须把天使的分身打败，然后使用 Absorb 技能将分身收回天使体内。为了完成这一目标，死后世界战线决定组织一次会战，把天使的分身们引诱到地下矿场，利用熟悉的地形和及时的指挥取得战斗的胜利。

### 题目描述

地下矿场有 $n$ 个矿洞，矿洞之间有 $m$ 条隧道相连接，所有矿洞之间都可以互相到达。

为了防备不测，地下矿洞中的成员制定了完备的战时物资供给体系。一些战略物资被储存在矿洞中的隐秘部位，为了防止被敌方利用，物资的深度可能不同，并且可以做到实时评估物资获取的难度。成员们在部署物资时考虑周全，因此每个矿洞中的物资可以认为是充足的。

这次战斗的胜利与否很大程度上取决于物资的补给是否高效及时，为了完成这一目标，矿洞中的领导人物会在战斗中实时指挥。由于敌我差距悬殊，战斗中自然要避免遭遇战，所以经常要转移阵地（转移的起点终点是给定的），并且在转移的过程中选择一个矿洞补充弹药。为了快速转移，转移的过程中应避免重复经过同一矿洞两次（即只走简单路径）。

由于战斗的破坏导致的物资埋藏深度变化，在某些时刻某些矿洞中的物资获取难度可能有所变化。

现在的任务就是对于每一组需要转移的成员，指挥其选择合适的路线，使得其补充弹药的时间尽可能短。

### 输入格式

第 $1$ 行三个正整数 $n,m,q$ ，表示点数、边数、操作数；

第 $2$ 行 $n$ 个正整数 $w_i$，表示在每个矿洞点初始获取物资消耗的时间；

接下来 $m$ 行，每行三个正整数 $u,v$ ，表示矿洞 $u,v$ 之间有一个隧道相连；

接下来 $q$ 行，每行一个大写字母 $c$ 和两个正整数 $x,y$，

- 若 $c$ 为 'C', 则表示在矿洞 $x$ 获取物资消耗的时间变为 $y$
- 若 $c$ 为 'Q', 则表示询问从矿洞 $x$ 到矿洞 $y$ 途中获取装备需要时间的最小值。

### 输出格式

对于每个询问，输出一行一个整数，表示获取装备需要时间的最小值。





### 样例数据

| harmonics1.in                                                | harmonics1.ans                       |
| ------------------------------------------------------------ | ------------------------------------ |
| <font face="consolas">3 3 3</br>1 2 3</br>1 2</br>2 3</br>1 3</br>Q 2 3</br>C 1 5</br>Q 2 3</font> | <font face="consolas">1</br>2</font> |

附加样例文件：`harmonics2.in/ans` `harmonics3.in/ans`

### 数据范围

| 测试点 | $n,m,q$    | 特殊条件                |
| ------ | ---------- | ----------------------- |
| 1-2    | $\leq20$   | 没有 'C' 操作           |
| 3-5    | $\leq1000$ | $m=n-1$ , 没有 'C' 操作 |
| 5-9    | $\leq10^5$ | $m=n-1$ , 没有 'C' 操作 |
| 10-14  | $\leq10^5$ | $m=n-1$                 |
| 15-19  | $\leq10^5$ | 没有 'C' 操作           |
| 20-25  | $\leq10^5$ |                         |

$w_i\leq10^9$

数据有一定梯度